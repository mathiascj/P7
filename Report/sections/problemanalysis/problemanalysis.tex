\chapter{Problem Analysis}\label{ch:problemanalysis}
In this chapter we will delwe deeper into the problem stated in \cref{ch:introduction}. While the eventual solution is aimed at the area of modular factories as a whole, we use the FESTO modular factory system \cite{FESTOweb} as a point of reference. This system was chosen specifically as Aalborg University's Department of Mechanical and Manufacturing Engineering have access to several FESTO modules. In the following sections we will give a quick description of the modular FESTO system. Afterwards we look into the problems it poses, leading into a final problem definition.  

\section{FESTO}\label{sec:festo}
The FESTO system accessible to us is the Cyber-Physcial(CP) Learning Factory. This is not intended for full fledged production, but rather to educate students and allow for industry 4.0 research. While not an industrial system, we deem that it will aid in a general understanding of the field and its related problems. The public litterature about the CP-factory is rather light. The most reliable sources come from FESTO themselves, such as with \cite{CPFactory2015}. To supply the written material, we also use our own observations about the local setup, in addition to statements made by staff working the factory.  

\begin{figure}[h]
\centering
\includegraphics[width=\textwidth]{CP_Factory.jpg}
\caption{A CP-factory setup}
\label{fig:festo-example}
\end{figure}

An example of a CP-factory setup can be seen in \cref{fig:festo-example}. Each module in a setup is made up of the same base unit. This includes a control panel as well as two conveyor belts moving in opposite directions. Modules can be connected either at the narrow ends or on the face opposite the control panel. On each module new equiptment may be fitted. This can include a robot arm, a drill, camera etc. The high-level factory tasks are handled through a MES(Manufacturing Execution System)known as MES4. This controls production order dispatch, scheduling, resource management etc. The low-level control occuring at each module is determined by KRL code, created for each module and its equiptment. The factory also uses a large amount of networking technologies. RFID technology is used to monitor the location of individual items running along the conveyor belts. Individual modules may communicate by fieldbus, while overall communications in the factory occurs over a WLAN. The factory may also be connected to an Enterprise Resource Planning (ERP) system or other factories through MES4. A production run is initiated by activating each module through its control panel, then launching from a PC.

\section{Problems in modular factories}
Through our discussion with staff at Aalborg University we identified some problems relating to use of the modular FESTO system. Additional problems concerning modular factories in general were found by looking into the litterature. In this section we will examine each of these issues. 

\subsection{Calculating an optimal factory configuration}
Aalborg staff relayed to us that they would like to dynamically generate optimal production lines according to demand. Product Lifecycle Management (PLM) systems such as Siemens' Technomatix \cite{Siemens2014} have this sort of functionality included. Technomatix focuses on simulation of factories to identify bottlenecks, and in general test the throughput of factories before they are implemented. Yet, it does not seem to focus on rapidly changing factory layouts. It is more about getting the production line right before implementation. When new demands come in, technomatix may suggest how to optimize production parameters for an implemented layout. This is different from how modular factories are intended to work. When new demands come in, the existing factory does not only update its parameters, but perhaps its whole layout. Thus the problem is not only about creating the fastest schedule with the highest throughput on an already implemented factory. It also concerns looking at alternative layouts, and how they may schedule production to improve throughput. Yet, we can not only weigh layouts against each other based on the speed of their schedules. We may be in a situation, where there there is a high cost to reconfigure an implemented layout to the new one. Then it may be better to not reconfigure, even though the new layout offers a better schedule with a higher throughput. 


\subsection{Manual Software Reconfiguration}
On the issue of reconfiguration, Aalborg staff informed us that the difficult part of putting up a new layout was not the moving and connecting of the physcial modules. Instead it was the reconfiguration of individual modules. As mentioned in \cref{sec:festo} the FESTO system has a split between its high-level control and low-level control. The MES4 system does not control the individual modules. KRL code associated with each module does. Thus, when the system is reconfigured, the KRL code of each module most likely has to be rewritten. This is no light task as each logical case will have to be handled. What does the module do, when a red phone passes it? What if it is black? Each rather mundane case has to be handled, leading to a lot of boilerplate code. The staff here at Aalborg themselves, suggested that they would like a way to generate the KRL code, from the schdule to be processed by the production line. This problem is of course not only relevant in the case of FESTO. Any production line has to update its machine controlling code, if it reconfigures its layout.

%\subsection{Error Recovery}

\subsection{Security}
Like with the rest of Industry 4.0, modular factories rely heavily on networking technologies to interconnect every part of production. Through this network a lot of security and safety-critical data is send. Security is however often not adequate and modular factories are thus at risk of infiltration from many different angles. This is an issue as an attack on a modular factory risks both a monetary, but also a human loss. Yet, it also seems that many modern security methods do not work for the modular factory. This is in part because a factory has a high requirement for avaliability. Thus a registered attack can not simply be countered by halting production. In addition, modules are often required to have low power consumption and minimal cost. Again, security features will clash with these requirements. \cite{Sadeghi2015}

\subsection{Big Data}
Modular factories store a lot of data about their production. Each individual module, item and piece of equiptment may be a source of information. Thus there is a vast amount of heterogeneous data to deal with. Thus we must concern the field of Big Data, the challenges it brings along. The size of data itself puts significant requirements on both hardware and software. There is also the issue of how to use the data for real time analysis and detection. Not all data is interesting either, so the cleaning of raw data has to be handled as well.\cite{Yin2015} 

\input {sections/problemanalysis/problemdefinition.tex}

